import{j as n,D as I,a as l,T as R,b as L,B as w,s as f,C as ee,d as N,p as y,g as F,c as j,l as S,e as $,f as ne,h as M,i as te,A as oe,k as re,I as ae,m as ie,n as W,o as le,q as se,r as J,L as ce,t as b,u as C,v as de,w as k,x as ue,y as fe,z as ge,Q as me,E as he,F as pe,G as _,H as ve,J as ye,K as be,M as Ce,N as g,O as z,P as ke,R as Be,S as Fe,U as Te,V as we}from"./vendor.c7fd77f3.js";const Se=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(o){if(o.ep)return;o.ep=!0;const s=t(o);fetch(o.href,s)}};Se();const Ae=e=>n(I,{fullWidth:!0,open:e.dialogOpen,onClose:e.onToggleDialog,children:n("form",{onSubmit:r=>{r.preventDefault(),e.onSubmit()},children:l("div",{style:{margin:"1em"},children:[n(R,{variant:"standard",style:{width:"100%",fontSize:"16px",fontFamily:"-apple-system, BlinkMacSystemFont, Roboto, sans-serif"},label:"\u30BF\u30B9\u30AF\u3092\u5165\u529B...",onChange:r=>e.onChange(r),value:e.text,autoFocus:!0}),n(L,{children:n(w,{color:"secondary",onClick:e.onSubmit,"aria-label":"add",children:"\u8FFD\u52A0"})})]})})}),De=f("div")({margin:"0 auto",maxWidth:"640px",fontFamily:"-apple-system, BlinkMacSystemFont, Roboto, sans-serif"}),Oe=f(ee)(({theme:e})=>({marginTop:e.spacing(1),marginLeft:e.spacing(2),marginRight:e.spacing(2),padding:e.spacing(1),fontFamily:"-apple-system, BlinkMacSystemFont, Roboto, sans-serif"})),xe=f("div")(({theme:e})=>({marginTop:e.spacing(1),marginLeft:e.spacing(1),marginRight:e.spacing(1),fontSize:"16px"})),Ee=f("div")(({theme:e})=>({marginTop:e.spacing(1),display:"flex",flexDirection:"row",justifyContent:"space-between"})),Ie=f("button")(()=>({display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",background:"none",border:"none",cursor:"pointer",outline:"none"})),Re=f("button")(()=>({background:"none",border:"none",cursor:"pointer",outline:"none"})),Le=e=>{const r=e.todos.filter(t=>{switch(e.filter){case"all":return!t.removed;case"checked":return t.checked&&!t.removed;case"unchecked":return!t.checked&&!t.removed;case"removed":return t.removed;default:return t}});return n(De,{children:r.map(t=>l(Oe,{children:[n(xe,{children:n(R,{fullWidth:!0,variant:"standard",value:t.value,onChange:a=>e.onEdit(t.id,a.target.value),disabled:t.checked||t.removed})}),l(Ee,{children:[l(Ie,{onClick:()=>e.onCheck(t.id,t.checked),disabled:e.filter==="removed","aria-label":"check",children:[t.checked?n(N,{style:{color:e.filter!=="removed"?y.A200:F[500]}}):n(j,{style:{color:e.filter!=="removed"?S[500]:F[500]}}),n($,{style:{userSelect:"none",color:t.checked&&e.filter!=="removed"?y.A200:F[500]},children:"Done"})]}),n(Re,{onClick:()=>e.onRemove(t.id,t.removed),"aria-label":"trash",children:t.removed?n(ne,{style:{color:S[500]}}):n(M,{style:{color:F[500]}})})]})]},t.id))})},Ne=e=>{const r=t=>{switch(t){case"all":return"\u3059\u3079\u3066\u306E\u30BF\u30B9\u30AF";case"unchecked":return"\u73FE\u5728\u306E\u30BF\u30B9\u30AF";case"checked":return"\u5B8C\u4E86\u3057\u305F\u30BF\u30B9\u30AF";case"removed":return"\u3054\u307F\u7BB1";default:return"TODO"}};return n(te,{sx:{flexGrow:1},children:n(oe,{position:"static",children:l(re,{children:[n(ae,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},onClick:e.onToggleDrawer,children:n(ie,{})}),n($,{children:r(e.filter)})]})})})},je="todo20211211",$e="0.0.0",Me="https://tangra-sd.github.io/todo20211211",We={dev:"vite",build:"tsc && vite build",preview:"vite preview"},Je={"@emotion/react":"^11.7.0","@emotion/styled":"^11.6.0","@fontsource/roboto":"^4.5.1","@mui/icons-material":"^5.2.1","@mui/material":"^5.2.3",localforage:"^1.10.0",react:"^17.0.2","react-dom":"^17.0.2","react-qrcode-logo":"^2.5.0"},_e={"@types/react":"^17.0.33","@types/react-dom":"^17.0.10","@vitejs/plugin-react":"^1.0.7",typescript:"^4.4.4",vite:"^2.7.0","vite-plugin-pwa":"^0.11.11"};var ze={name:je,version:$e,homepage:Me,scripts:We,dependencies:Je,devDependencies:_e};const Pe=f("div")(()=>({width:250})),Qe=f("div")(()=>({height:150,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"1em",backgroundColor:W[500],color:"#ffffff",fontFamily:"-apple-system, BlinkMacSystemFont, Roboto, sans-serif"})),Ue=f(le)(({theme:e})=>({backgroundColor:y[500],width:e.spacing(6),height:e.spacing(6)})),qe=f(j)(()=>({color:S[500]})),Ge=f(N)(()=>({color:y.A200})),Ke=e=>n(se,{variant:"temporary",open:e.drawerOpen,onClose:e.onToggleDrawer,children:l(Pe,{role:"presentation",onClick:e.onToggleDrawer,children:[l(Qe,{children:[n(Ue,{children:n(J,{})}),l("p",{children:["TODO v",ze.version]})]}),l(ce,{children:[l(b,{button:!0,onClick:()=>e.onSort("all"),"aria-label":"all",children:[n(C,{children:n(de,{})}),n(k,{secondary:"\u3059\u3079\u3066\u306E\u30BF\u30B9\u30AF"})]}),l(b,{button:!0,onClick:()=>e.onSort("unchecked"),"aria-label":"incomplete",children:[n(C,{children:n(qe,{})}),n(k,{secondary:"\u73FE\u5728\u306E\u30BF\u30B9\u30AF"})]}),l(b,{button:!0,onClick:()=>e.onSort("checked"),"aria-label":"complete",children:[n(C,{children:n(Ge,{})}),n(k,{secondary:"\u5B8C\u4E86\u3057\u305F\u30BF\u30B9\u30AF"})]}),l(b,{button:!0,onClick:()=>e.onSort("removed"),"aria-label":"removed",children:[n(C,{children:n(M,{})}),n(k,{secondary:"\u3054\u307F\u7BB1"})]}),n(ue,{}),l(b,{button:!0,onClick:e.onToggleQr,"aria-label":"share",children:[n(C,{children:n(fe,{})}),n(k,{secondary:"\u3053\u306E\u30A2\u30D7\u30EA\u3092\u5171\u6709"})]})]})]})}),He=f(ge)(({theme:e})=>({zIndex:e.zIndex.drawer+1,color:"#fff",backgroundColor:"rgba(0, 0, 0, 0.8)"})),Ve=e=>n(He,{open:e.open,onClick:e.onClose,children:n(me,{value:"https://sprout2000.github.io/todo"})}),Xe=f(I)(()=>({fontFamily:"-apple-system, BlinkMacSystemFont, Roboto, sans-serif"})),Ye=e=>l(Xe,{open:e.alertOpen,onClose:e.onToggleAlert,children:[n(he,{children:"\u30A2\u30E9\u30FC\u30C8"}),l(pe,{children:[n(_,{children:"\u672C\u5F53\u306B\u3054\u307F\u7BB1\u3092\u5B8C\u5168\u306B\u7A7A\u306B\u3057\u307E\u3059\u304B\uFF1F"}),n(_,{children:"\u3053\u306E\u64CD\u4F5C\u306F\u53D6\u308A\u6D88\u3057\u3067\u304D\u307E\u305B\u3093\u3002"})]}),l(L,{children:[n(w,{onClick:e.onToggleAlert,color:"primary","aria-label":"cancel",children:"\u30AD\u30E3\u30F3\u30BB\u30EB"}),n(w,{onClick:()=>{e.onToggleAlert(),e.onEmpty()},color:"secondary","aria-label":"ok",autoFocus:!0,children:"OK"})]})]}),P=f(ve)({position:"fixed",right:15,bottom:15}),Ze=e=>{const r=e.todos.filter(t=>t.removed).length!==0;return n(ye,{children:e.filter==="removed"?n(P,{"aria-label":"delete-button",color:"secondary",onClick:e.onToggleAlert,disabled:!r||e.alertOpen,children:n(be,{})}):n(P,{"aria-label":"add-button",color:"secondary",onClick:e.onToggleDialog,disabled:e.filter==="checked"||e.dialogOpen,children:n(J,{})})})},en=e=>typeof e=="string",nn=e=>typeof e=="number",tn=(e,r="all")=>t=>Array.isArray(t)&&(r==="all"?(a=>{for(const o of a)if(!e(o))return!1;return!0})(t):typeof t[0]=="undefined"||e(t[0])),on=e=>typeof e=="object"&&e!==null&&!Array.isArray(e),Q=e=>r=>e.reduce((t,a)=>t||a(r),!1),rn=(e,r="all")=>tn(t=>on(t)&&"value"in t&&en(t.value)&&"id"in t&&nn(t.id)&&"checked"in t&&(a=>Q([o=>o===!1,o=>o===!0])(a))(t.checked)&&"removed"in t&&(a=>Q([o=>o===!1,o=>o===!0])(a))(t.removed),r)(e),an=Ce({palette:{primary:{main:W[500],light:"#757de8",dark:"#002984"},secondary:{main:y[500],light:"#ff6090",dark:"#b0003a"}}}),ln=()=>{const[e,r]=g.exports.useState(""),[t,a]=g.exports.useState([]),[o,s]=g.exports.useState("all"),[d,h]=g.exports.useState(!1),B=()=>h(!d),[c,p]=g.exports.useState(!1),A=()=>{p(!c),r("")},[D,U]=g.exports.useState(!1),O=()=>U(!D),q=i=>{s(i)},[T,G]=g.exports.useState(!1),x=()=>G(!T),K=()=>{if(!e){p(!1);return}const i={value:e,id:new Date().getTime(),checked:!1,removed:!1};a([i,...t]),r(""),p(!1)},H=i=>{r(i.target.value)},V=(i,m)=>{const v=JSON.parse(JSON.stringify(t)).map(u=>(u.id===i&&(u.value=m),u));console.log("=== Original todos ==="),t.map(u=>console.log(`id: ${u.id}, value: ${u.value}`)),a(v)},X=(i,m)=>{const v=JSON.parse(JSON.stringify(t)).map(u=>(u.id===i&&(u.checked=!m),u));a(v)},Y=(i,m)=>{const v=JSON.parse(JSON.stringify(t)).map(u=>(u.id===i&&(u.removed=!m),u));a(v)},Z=()=>{const i=t.filter(m=>!m.removed);a(i)};return g.exports.useEffect(()=>{z.getItem("todo-20211211").then(i=>rn(i)&&a(i)).catch(i=>console.error(i))},[]),g.exports.useEffect(()=>{z.setItem("todo-20211211",t).catch(i=>console.error(i))},[t]),l(ke,{theme:an,children:[n(Be,{styles:{body:{margin:0,padding:0}}}),n(Ne,{filter:o,onToggleDrawer:O}),n(Ke,{drawerOpen:D,onSort:q,onToggleDrawer:O,onToggleQr:B}),n(Ve,{open:d,onClose:B}),n(Ae,{text:e,dialogOpen:c,onChange:H,onSubmit:K,onToggleDialog:A}),n(Ye,{alertOpen:T,onEmpty:Z,onToggleAlert:x}),n(Le,{todos:t,filter:o,onEdit:V,onCheck:X,onRemove:Y}),n(Ze,{todos:t,filter:o,alertOpen:T,dialogOpen:c,onToggleAlert:x,onToggleDialog:A})]})};function sn(e={}){const{immediate:r=!1,onNeedRefresh:t,onOfflineReady:a,onRegistered:o,onRegisterError:s}=e;let d,h;const B=async(c=!0)=>{c&&(d==null||d.addEventListener("controlling",p=>{p.isUpdate&&window.location.reload()})),h&&h.waiting&&await Te(h.waiting,{type:"SKIP_WAITING"})};if("serviceWorker"in navigator){d=new Fe("/sw.js",{scope:"/"}),d.addEventListener("activated",c=>{c.isUpdate||a==null||a()});{const c=()=>{t==null||t()};d.addEventListener("waiting",c),d.addEventListener("externalwaiting",c)}d.register({immediate:r}).then(c=>{h=c,o==null||o(c)}).catch(c=>{s==null||s(c)})}return B}we.render(n(ln,{}),document.getElementById("root"));sn();
